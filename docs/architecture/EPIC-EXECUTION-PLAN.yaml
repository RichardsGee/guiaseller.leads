---
# GuiaSeller Leads — Epic Execution Plan
# Generated by Aria (Architect) via Morgan (PM) Orchestration
# Wave-Based Parallel Development Strategy
# Status: Ready for Team Execution

project: guiaseller.leads
plan_version: 1.0
created: 2026-02-26
timeline: 8 weeks (MVP) + 6 weeks (Phase 2) + ongoing (Phase 3)

---

## PHASE 1: MVP (8 Weeks)

### Wave Strategy: 3 Waves + Serial Finalization

**Wave Model:**
- **Wave 1 (W1-W2):** Foundation — Parallel execution of infrastructure, auth, CI/CD
- **Wave 2 (W3-W5):** Core Features — Parallel execution of lead intelligence, UI, analytics
- **Wave 3 (W6-W7):** Testing & Polish — Quality assurance, performance validation
- **Wave 4 (W8):** Launch — Internal beta, feedback, go-live

---

## WAVE 1: Foundation (Week 1-2)

### Parallel Execution: 3 Streams

#### Stream 1A: Infrastructure & Database (@data-engineer + @dev)
**Epic:** 1.1 (Infrastructure & Database Setup)
**Stories:**
  - 1.1.1: Dual database setup (guiaseller + leads)
  - 1.1.2: Prisma ORM implementation
  - 1.1.3: Firebase configuration

**Dependencies:** None (blocking all others)
**Risk:** HIGH — Critical path
**Deliverables:**
  - `prisma/schema.prisma` (finalized)
  - `.env` configured with both DB URLs
  - Firebase project initialized
  - Migrations ready to run

**Success Criteria:**
  - [ ] Both databases accessible via Prisma
  - [ ] Schema validates with no errors
  - [ ] Firebase Realtime DB operational
  - [ ] SELECT-only constraint enforced on guiaseller DB

---

#### Stream 1B: Authentication & Security (@dev)
**Epic:** 1.2 (Authentication & Security)
**Stories:**
  - 1.2.1: Firebase Auth integration
  - 1.2.2: JWT middleware
  - 1.2.3: Role-based access control

**Dependencies:** BLOCKS everything else (auth required)
**Risk:** MEDIUM — Core to API security
**Deliverables:**
  - Firebase Auth endpoints (signin, signup, refresh)
  - JWT token generation & validation
  - RBAC middleware for routes

**Success Criteria:**
  - [ ] Login flows tested end-to-end
  - [ ] JWT tokens valid and refreshable
  - [ ] Role checks enforced on protected routes
  - [ ] No hardcoded credentials

---

#### Stream 1C: CI/CD & Infrastructure (@devops)
**Epic:** 1.7 (Deployment & CI/CD)
**Stories:**
  - 1.7.1: GitHub Actions workflows
  - 1.7.2: Railway/Vercel deployment
  - 1.7.3: Environment secrets
  - 1.7.4: Monitoring setup

**Dependencies:** BLOCKS deployment but not development
**Risk:** LOW — Non-blocking development
**Deliverables:**
  - `.github/workflows/` (lint, test, build, deploy)
  - Railway/Vercel projects configured
  - GitHub secrets set
  - Sentry configured

**Success Criteria:**
  - [ ] CI/CD pipeline fully automated
  - [ ] Staging environment auto-deploys on PR
  - [ ] Production deploys on main merge
  - [ ] Monitoring dashboards live

---

### Wave 1 Synchronization Point (EOW2)

**Go/No-Go Decision:**
- All Stream 1 outputs validated
- Database operational + schema finalized
- Auth fully tested + secure
- CI/CD pipeline automated

**If BLOCKED:** Escalate immediately, no progress to Wave 2

---

## WAVE 2: Core Features (Week 3-5)

### Parallel Execution: 2 Streams (dependent on Wave 1)

#### Stream 2A: Lead Intelligence API (@dev)
**Epic:** 1.3 (Core Lead Intelligence)
**Stories:**
  - 1.3.1: Lead CRUD endpoints
  - 1.3.2: Rule-based scoring service
  - 1.3.3: Lead segmentation
  - 1.3.4: Marketplace routing

**Dependencies:** REQUIRES Wave 1 (DB, Auth)
**Risk:** MEDIUM — Complex scoring logic
**Deliverables:**
  - `/api/v1/leads` endpoints
  - Scoring service (rule-based)
  - Segmentation logic
  - Background job queue (Bull) for recalc

**Success Criteria:**
  - [ ] All CRUD operations tested
  - [ ] Scoring accuracy validated
  - [ ] All 6 marketplaces routed correctly
  - [ ] Background jobs queue working

---

#### Stream 2B: Frontend Dashboard (@dev)
**Epic:** 1.4 (Dashboard & UI) + 1.5 (Analytics)
**Stories:**
  - 1.4.1: React dashboard layout
  - 1.4.2: Leads table (filter, sort, paginate)
  - 1.4.3: Lead detail view
  - 1.4.4: Firebase real-time sync
  - 1.5.1-1.5.3: Analytics dashboard

**Dependencies:** REQUIRES Wave 1 (Auth) + Stream 2A (API ready)
**Risk:** MEDIUM — High complexity, lots of UI
**Deliverables:**
  - React components (AppLayout, Sidebar, LeadsTable, etc.)
  - State management (Zustand stores)
  - TanStack Query setup (caching, sync)
  - Firebase listeners (real-time updates)
  - Analytics dashboard with charts

**Success Criteria:**
  - [ ] Dashboard loads < 2 seconds
  - [ ] All filters work correctly
  - [ ] Real-time updates appear < 2 seconds
  - [ ] Charts render without lag

---

#### Stream 2C: Analytics Database Optimization (@data-engineer)
**Epic:** 1.5.4 (Materialized Views)
**Stories:**
  - 1.5.4: Setup materialized views for performance

**Dependencies:** REQUIRES Wave 1 (DB schema)
**Risk:** LOW — Database optimization only
**Deliverables:**
  - Materialized views (leads_analytics, daily aggregates)
  - Index optimization (multi-column, BRIN, partial)
  - Cron job for view refresh
  - Query performance benchmarks

**Success Criteria:**
  - [ ] Analytics queries < 5 seconds
  - [ ] Views auto-refresh nightly
  - [ ] Index sizes optimal

---

### Wave 2 Synchronization Point (EOW5)

**Go/No-Go Decision:**
- API endpoints fully functional + tested
- Frontend renders without errors
- Analytics queries performant
- Real-time sync < 2 seconds

---

## WAVE 3: Testing & Polish (Week 6-7)

### Serial Execution (parallel with Wave 2 end)

#### Testing Strategy (Epic 1.6)
**Owner:** @qa
**Stories:**
  - 1.6.1: Unit tests (backend services)
  - 1.6.2: Integration tests (API endpoints)
  - 1.6.3: Component tests (React)
  - 1.6.4: E2E tests (critical flows)

**Coverage Target:** > 80% (unit + integration)

**Test Scenarios:**
1. **API Tests:** CRUD, filtering, sorting, pagination, error cases
2. **Scoring Tests:** Rule-based scoring accuracy, edge cases
3. **UI Tests:** Component rendering, user interactions, state updates
4. **Real-Time Tests:** Firebase sync latency, reconnection handling
5. **Performance Tests:** Load testing (50+ concurrent users)
6. **Security Tests:** SQL injection, XSS, CSRF, auth bypass

**Success Criteria:**
  - [ ] All tests pass (zero failures)
  - [ ] Code coverage > 80%
  - [ ] Dashboard load < 2s (validated with load test)
  - [ ] 99.9% API uptime (7-day baseline)
  - [ ] No CRITICAL security issues (CodeRabbit)

---

### Quality Gate Validation
- CodeRabbit review: PASS (zero CRITICAL issues)
- Performance profiling: PASS (<2s latency)
- Security audit: PASS (no vulnerabilities)

---

## WAVE 4: Launch (Week 8)

### Finalization & Internal Beta
**Owner:** @pm + Team

**Stories:**
  - 1.8.1: Admin training & onboarding
  - 1.8.2: Performance validation
  - 1.8.3: Security audit (final)
  - 1.8.4: Internal beta launch

**Activities:**
1. **UAT:** Real admins test with real lead data
2. **Training:** Document dashboard usage, best practices
3. **Monitoring:** 24/7 support for first week
4. **Feedback Collection:** Weekly surveys (target: > 4.5/5)
5. **Metrics Validation:** Conversion rate, latency, uptime

**Success Criteria (Go-Live Gate):**
  - [ ] Admin satisfaction > 4/5 (initial UAT)
  - [ ] Dashboard uptime 99.9% (continuous)
  - [ ] Zero critical bugs reported
  - [ ] Conversion rate improvement > 10% (expected)

---

## PHASE 2: AI Personalization (6 Weeks)

### Wave Strategy: 2 Waves

#### Wave 1: ML Infrastructure (Week 1-3)
**Epic:** 2.1 (ML Model & Scoring)
- Build training pipeline
- Train scoring model (85%+ accuracy target)
- Model serving infrastructure

**Dependencies:** Phase 1 complete + historical lead data

**Deliverables:**
- Training data pipeline (automated)
- Trained ML model (85%+ accuracy validated)
- Model serving API (/api/v1/leads/:id/ai-score)
- Monthly retraining pipeline

---

#### Wave 2: Recommendations Engine (Week 3-6)
**Epic:** 2.2 + 2.3 (Recommendations + A/B Testing)
- Recommendation engine
- Optimal discount calculation
- Contact timing prediction
- A/B testing framework

**Dependencies:** Wave 1 complete (model serving operational)

**Deliverables:**
- Recommendation API (/api/v1/leads/:id/recommendations)
- Feature flag system (for A/B testing)
- A/B results dashboard

---

## PHASE 3: Scale & Growth (Ongoing)

### Epics (Parallel, Self-Organized)

#### Epic 3.1: API & Integrations
- REST API versioning (v2)
- GraphQL endpoint (optional)
- Public API documentation

#### Epic 3.2: Marketplace Expansion
- TikTok integration
- Amazon integration
- Shein integration
- Marketplace-specific scoring

#### Epic 3.3: White-Label Preparation
- Multi-tenant architecture
- Custom branding
- API key management
- Customer portal

#### Epic 3.4: Advanced Analytics
- Custom reports builder
- Scheduled email reports
- Data export API

---

## Dependency Graph

```
Wave 1 (Foundation):
├── 1.1 (Infrastructure) ──┐
├── 1.2 (Auth)  ───────────┼──> Wave 2 (Core Features)
└── 1.7 (CI/CD) ───────────┘
                             │
                             ├── 1.3 (Lead Intelligence)
                             ├── 1.4 + 1.5 (UI + Analytics)
                             └── 1.5.4 (Database Optimization)
                                    │
                                    └──> Wave 3 (Testing & Polish)
                                            │
                                            └──> Wave 4 (Launch)
                                                    │
                                                    └──> Phase 2 (AI)
```

---

## Resource Allocation

### Phase 1 (MVP) — Team Composition

| Role | Count | Allocation | Notes |
|------|-------|-----------|-------|
| Backend Developer | 2 | 100% | API, scoring, real-time |
| Frontend Developer | 1 | 100% | Dashboard, UI, state management |
| Database Engineer | 1 | 80% | Schema, optimization, migrations |
| QA / Tester | 1 | 80% | Testing, performance validation |
| DevOps Engineer | 1 | 60% | CI/CD, monitoring, deployment |
| Product Manager | 1 | 40% | Planning, stakeholder comms |

**Total FTE:** ~5.6 engineers

---

## Risk & Mitigation

### High-Risk Areas

| Risk | Impact | Mitigation |
|------|--------|-----------|
| **Real-time latency (<2s)** | High | Early optimization, load testing W6 |
| **Dual database complexity** | High | Early @data-engineer focus (W1) |
| **Firebase reliability** | Medium | Offline fallback, retry logic |
| **Team resource shortage** | Medium | Clear scope, prioritization (MUST/SHOULD/COULD) |
| **ML model accuracy (<85%)** | Medium | Phase 1 rule-based, Phase 2 iterative training |

### Mitigation Strategy

1. **Weekly standups:** Status check, blocker resolution
2. **Sprint reviews:** Validate completeness, collect feedback
3. **Risk dashboard:** Track known issues, escalate early
4. **Slack channel:** #guiaseller-leads-team (async updates)

---

## Success Metrics

### Phase 1 MVP Launch Criteria

**Technical:**
- [ ] Dashboard load time < 2 seconds (p95)
- [ ] API availability 99.9% (7-day baseline)
- [ ] Real-time sync latency < 2 seconds (p95)
- [ ] Code coverage > 80% (unit + integration)
- [ ] Zero CRITICAL security issues

**Business:**
- [ ] Admin adoption > 95% (daily active users)
- [ ] Admin satisfaction > 4.5/5 (survey)
- [ ] Conversion rate improvement > 10% (vs baseline)
- [ ] Lead processing time < 7 minutes (vs 15 min baseline)

**Quality:**
- [ ] All tests pass (zero failures)
- [ ] CodeRabbit review: PASS
- [ ] Security audit: PASS
- [ ] Performance testing: PASS

---

## Communication & Handoff

### Weekly Sync (Tuesdays 10am)
- Wave progress
- Blockers & escalations
- Metric updates
- Decisions needed

### Sprint Review (EOW Friday)
- Demo of completed features
- Stakeholder feedback
- Plan next sprint

### Phase 1 → Phase 2 Kickoff (After W8 Launch)
- Retrospective (what went well, what to improve)
- Phase 2 scope confirmation
- Team assignments for AI work

---

## Approval & Activation

**Approval Status:** ✅ READY FOR TEAM EXECUTION

**Next Steps:**
1. Team reviews plan (24 hours)
2. Kick-off meeting (establish Slack, tools, cadence)
3. Sprint 1 execution (W1-W2 Foundation)
4. Weekly syncs + standups

---

**Document Status:** ✅ FINAL
**Owner:** Morgan (PM) + Aria (Architect)
**Team:** @dev, @data-engineer, @qa, @devops
**Timeline:** 8 weeks Phase 1 → 6 weeks Phase 2 → ongoing Phase 3

